import{h as b}from"./kaplay-CpR_OpMc.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();const e=b();function g(t,o,n=e.color(255,255,255)){const i=e.add([e.text(t,{size:60,textAlign:"center"}),e.pos(o),n,e.opacity(1),{life:1,speed:-90},"floatingText"]);return i.onUpdate(()=>{i.move(0,i.speed),i.opacity-=e.dt()/i.life,i.opacity<=0&&i.destroy()}),i}const y=(t,o,n)=>t+(o-t)*n,p=(t,o,n,i,s)=>{let r=0;console.log(t.scale),t.scaleTo(o),t.onUpdate(()=>{r+=e.dt();let c=Math.min(r/i,1);t.scaleTo(y(o,n,c)),c>=1&&(t.destroy(),s&&s())})};class d{constructor(o,n,i){this.spawnTime=o,this.timeDecrease=n,this.callback=i,this.active=!0,this._loop()}_loop(){if(!this.active)return;this.callback();const o=Math.max(this.spawnTime-this.timeDecrease,this.timeDecrease);e.wait(o,()=>{this.spawnTime=o,this._loop()})}stop(){this.active=!1}reset(o){this.spawnTime=o,this.active||(this.active=!0,this._loop())}}let l=0;const w=e.add([e.text(l),pos(24,24)]);e.loadSprite("base","sprites/human.png");e.loadSprite("bomb","sprites/bomb.png");const m=30,u=e.width()-30,f=30,h=e.height()-30,a=(t,o)=>Math.random()*(o-t)+t,x=()=>{const t=a(m,u),o=a(f,h),n=e.add([e.pos(t,o),e.anchor("center"),e.sprite("base"),e.scale(1),e.area(),"human"]);p(n,1,1.5,3,()=>{e.quit()})},T=()=>{const t=a(m,u),o=a(f,h),n=e.add([e.pos(t,o),e.sprite("bomb"),e.scale(1),e.anchor("center"),e.area(),"bomb"]);p(n,1,1.5,3,()=>{})};e.onClick("human",t=>{console.log("click"),l++,w.text=l,t.destroy(),e.addKaboom(t.pos,{scale:.5,speed:2}),g("БРОК!",t.pos,e.color(255,0,0))});e.onClick("bomb",()=>{e.quit()});new d(3,.1,x);e.wait(5,()=>new d(6,.5,T));e.loadSprite("base","sprites/human.png");e.loadSprite("bomb","sprites/bomb.png");
//# sourceMappingURL=index-DbKfOAKR.js.map
